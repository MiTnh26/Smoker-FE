/* src/styles/components/newsfeed-theme.css */
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer components {
  /* ===== Page Wrapper ===== */
  .newsfeed-page {
    @apply flex flex-col min-h-screen;
    background-color: rgb(var(--background));
    color: rgb(var(--foreground));
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  }

  /* ===== Header ===== */
  .newsfeed-header {
    @apply h-16 flex items-center px-8 sticky top-0 z-10;
    background-color: rgb(var(--card));
    border-bottom: 1px solid rgb(var(--border));
    backdrop-filter: blur(10px);
  }

  .newsfeed-header-content {
    @apply flex items-center w-full justify-between mx-auto;
    max-width: 1400px;
  }

  .newsfeed-logo {
    @apply text-2xl font-bold no-underline;
    color: rgb(var(--primary));
    letter-spacing: -0.02em;
    transition: opacity 0.2s;
  }
  .newsfeed-logo:hover {
    opacity: 0.8;
  }

  /* ===== Search Bar ===== */
  .newsfeed-search {
    @apply flex items-center flex-1 max-w-md mx-4 px-4 rounded-xl border transition;
    background-color: rgb(var(--card));
    border: 1px solid rgb(var(--border));
  }

  .newsfeed-search:focus-within {
    border-color: rgb(var(--primary));
  }

  .search-icon {
    @apply mr-2;
    color: rgb(var(--muted-foreground));
  }

  .search-input {
    @apply flex-1 border-none bg-transparent outline-none text-base;
    color: rgb(var(--foreground));
  }
  .search-input::placeholder {
    color: rgb(var(--muted-foreground));
  }

  /* ===== Header Nav ===== */
  .newsfeed-nav {
    @apply flex gap-2;
  }

  .newsfeed-nav .nav-icon {
    @apply rounded-xl p-2 flex items-center justify-center transition cursor-pointer;
    position: relative;
    background: none;
    color: rgb(var(--muted-foreground));
  }

  .newsfeed-nav .nav-icon.active,
  .newsfeed-nav .nav-icon:hover {
    color: rgb(var(--primary-foreground));
    background-color: rgb(var(--primary));
    transform: translateY(-1px);
  }

  .nav-icon-badge {
    position: absolute;
    top: -2px;
    right: -2px;
    min-width: 18px;
    height: 18px;
    padding: 0 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #ef4444;
    color: white;
    border-radius: 9px;
    font-size: 11px;
    font-weight: 600;
    line-height: 1;
    border: 2px solid rgb(var(--card));
    z-index: 10;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  }

  /* ===== User Menu Panel ===== */
  .user-menu-panel {
    @apply fixed top-20 right-8 flex flex-col overflow-hidden rounded-xl shadow-lg;
    width: 360px;
    max-height: 500px;
    background-color: rgb(var(--card));
    color: rgb(var(--card-foreground));
    animation: slideDown 0.2s ease-out;
  }

  .user-menu-content {
    @apply p-4 flex flex-col;
  }

  .user-menu-profile {
    @apply flex items-center gap-4 p-4 rounded-xl mb-4;
    background-color: rgb(var(--muted));
  }

  .user-menu-avatar {
    @apply rounded-full;
    position: relative;
    background: linear-gradient(135deg, rgb(var(--primary)) 0%, rgb(var(--secondary)) 100%);
    color: rgb(var(--primary-foreground));
    padding: 0;
    margin: 0;
  }
  
  .user-menu-avatar img {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
    display: block;
    margin: 0;
    padding: 0;
  }

  .user-menu-info h3 {
    @apply m-0 text-base font-semibold;
    color: rgb(var(--foreground));
  }

  .user-menu-info p {
    @apply m-0 mt-1 text-sm;
    color: rgb(var(--muted-foreground));
  }

  .user-menu-divider {
    @apply h-px my-3;
    background-color: rgb(var(--border));
  }

  .user-menu-nav {
    @apply flex flex-col gap-1;
  }

  .user-menu-item {
    @apply flex items-center gap-3 px-4 py-2 rounded-lg text-sm font-medium transition;
    color: rgb(var(--muted-foreground));
    text-decoration: none;
  }

  .user-menu-item:hover {
    @apply transform translate-x-1;
    background-color: rgb(var(--muted));
    color: rgb(var(--primary));
  }

  .user-menu-logout {
    @apply flex items-center gap-3 px-4 py-2 rounded-lg text-sm font-medium cursor-pointer transition;
    color: rgb(var(--danger));
    background: none;
    border: none;
    text-align: left;
  }
  .user-menu-logout:hover {
    @apply transform translate-x-1;
    background-color: rgba(var(--danger) / 0.1);
  }

  @keyframes slideDown {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* ===== Main Content ===== */
  .newsfeed-container {
    @apply flex flex-1 gap-8 px-8 mx-auto;
    max-width: 1400px;
  }

  /* ===== Sidebar Left ===== */
  .newsfeed-sidebar-left {
    @apply sticky p-6 rounded-xl;
    width: 280px;
    background-color: rgb(var(--card));
    border: 1px solid rgb(var(--border));
    top: 5.5rem;
  }

  .sidebar-user-profile {
    @apply flex items-center gap-3 mb-6 pb-6 border-b;
    border-color: rgb(var(--border));
  }

  .sidebar-user-avatar {
    @apply flex items-center justify-center rounded-full p-2;
    background: linear-gradient(135deg, rgb(var(--primary)) 0%, rgb(var(--secondary)) 100%);
    color: rgb(var(--primary-foreground));
  }

  .sidebar-user-info h3 {
    @apply m-0 text-base font-semibold;
    color: rgb(var(--foreground));
  }
  .sidebar-user-info p {
    @apply m-0 mt-1 text-sm;
    color: rgb(var(--muted-foreground));
  }

  .sidebar-nav {
    @apply flex flex-col gap-1;
  }
  .sidebar-nav-item {
    @apply block px-4 py-3 rounded-lg text-sm font-medium transition;
    color: rgb(var(--muted-foreground));
    text-decoration: none;
  }
  .sidebar-nav-item:hover {
    @apply transform translate-x-1;
    background-color: rgb(var(--muted));
    color: rgb(var(--primary));
  }

  /* ===== Feed / Post Cards ===== */
  .newsfeed-main { @apply flex-1 min-w-0; }
  /* Reduce spacing between posts */
  .feed-posts { @apply flex flex-col gap-1.5; }

  .post-card {
    @apply p-6 rounded-xl transition;
    background-color: rgb(var(--card));
    border: 1px solid rgb(var(--border));
  }
  .post-card:hover {
    /* Bỏ hiệu ứng hover làm nền sáng mờ */
  }

  .post-header, .post-user { @apply flex items-center gap-3 justify-between; }
  .post-avatar {
    @apply flex items-center justify-center rounded-full p-1.5;
    background: linear-gradient(135deg, rgb(var(--primary)) 0%, rgb(var(--secondary)) 100%);
    color: rgb(var(--primary-foreground));
  }

  .post-username { @apply m-0 text-base font-semibold; color: rgb(var(--foreground)); }
  .post-time { @apply text-sm mt-1; color: rgb(var(--muted-foreground)); }

  .post-menu { @apply p-2 rounded-lg transition; color: rgb(var(--muted-foreground)); background: none; border: none; cursor: pointer; }
  .post-menu:hover { background-color: rgb(var(--muted)); color: rgb(var(--primary)); }

  .post-content { @apply my-4 text-base leading-relaxed; color: rgb(var(--foreground)); }

  .post-audio {
    @apply flex items-center gap-4 p-4 rounded-xl border;
    background-color: rgb(var(--muted));
    border-color: rgb(var(--border));
  }
  .audio-play-btn {
    @apply flex items-center justify-center p-3 rounded-full cursor-pointer transition;
    background: linear-gradient(135deg, rgb(var(--primary)) 0%, rgb(var(--secondary)) 100%);
    color: rgb(var(--primary-foreground));
  }
  .audio-play-btn:hover {
    transform: scale(1.05);
    box-shadow: 0 6px 16px rgba(var(--primary) / 0.4);
  }

  .audio-title { @apply m-0 text-sm font-semibold; color: rgb(var(--foreground)); }

  .post-stats { @apply flex gap-6 my-4 py-3 border-t border-b text-sm; border-color: rgb(var(--border)); color: rgb(var(--muted-foreground)); }
  .post-actions { @apply flex gap-2 mt-4; }
  .action-btn {
    @apply flex-1 flex items-center justify-center gap-2 rounded-lg px-3 py-3 text-sm font-medium transition cursor-pointer;
    color: rgb(var(--muted-foreground));
    background: none;
    border: none;
  }
  .action-btn:hover {
    @apply transform -translate-y-0.5;
    background-color: rgb(var(--muted));
    color: rgb(var(--primary));
  }

  /* ===== Responsive ===== */
  @media (max-width: 768px) {
    .newsfeed-container { @apply flex-col px-0; }
    .newsfeed-sidebar-left { @apply w-full relative top-0; }
    .newsfeed-header { @apply px-0; }
    .newsfeed-search { @apply mx-2; }
    .user-menu-panel { @apply left-4 right-4 w-auto; }
  }
}
